Cloud+Access Controller (B version) Quick Start - HTTP Protocol This document describes the basic process when developing using the HTTP protocol. For specific instructions and principles, please refer to the document "Cloud Online Dual Channel Access Controller (Plus B Edition) - HTTP Protocol"Or "Cloud Online Dual Channel Access Controller (Plus B Edition) - HTTP Protocol Simplified Version" 2019-09-17 Please strictly follow the steps in this document for development, as this is the most time-saving. During the development process, it is important to capture packages, which can save 90% of time. Capturing packets can complete docking in 30 minutes. Please refer to the document "Cloud Controller Docking Development Guide" during the development processIf there is no device, you can first simulate the device using Postman, which can also complete basic development docking Please note that all markings are defined as follows: A represents IN, which is the direction of entry, B represents OUT as the direction of departure 
1? Prepare controller equipment 1. Initialize the controller: Long press reset until it calls twice;2. The controller is connected to the switch, and the switch is connected to the computer; Change the IP address of the computer to the same network segment as the controller; 3. Open the IP address of the controller using a browser, account admin 888888 2? Controller network configuration (if there are no devices, Postman can be used to simulate the devices) 1. Open the web interface of the controller, enter the network configuration interface, and select the HTTP protocol mode;2. Configure the server's address, port, and URL; 3. If necessary (using a domain name), configure DNS and gateway, usually the router address within the local area network that can access the internet. 3? Docking heartbeat 1. Start your own developed web server on the server. 2. Capture packets on the server, capturing the corresponding port or controller IP address; We will obtain the following data (please capture the package for confirmation):GET mode GET  /data/Acs.aspx? method=GetStatus&Now=2018060217181207&Crc=65535&T1=00& H1=00&T2=00&H2=00&NextNum=0&Key=23685&Index=11571&Serial=R12034&Status=03&Input=0000&IndexCmd=0&Ver=135&ID=R12034&MAC=0004A33CCCB2 HTTP/1.1 Host:192.168.1.230:84 User-Agent: Chrome/61.0.3163.100 Safari/537.36 Content-Type: application/json Connection: keep-Alive 	    POST modePOST /data/Acs.aspx?method=GetStatus& HTTP/1.1 Host:192.168.1.230:84 User-Agent: Chrome/61.0.3163.100 Safari/537.36 Content-Type: application/json Content-Length: 222 Connection: keep-Alive{"Serial":"R12034","Status":"03","Input":"0000","Ver":"135","ID":"R12034","IP":"192.168.3.34","MAC":"0004A33CCCB2","Now":"2018060217171607","Crc":"65535","T1":"00","H1":"00","T2":"00","H2":"00","NextNum":"0",”IndexCmd”:”0”,"Key":"26728"} 3. Write your own code to receive it and send a response string to the controller (please capture the packet for confirmation): {"Key":"26728"}
4? Docking card swiping requests Starting packet capture on the server and then swiping the card (scanning the code) will result in the following data: POST /data/Acs.aspx?method=SearchCardAcs& HTTP/1.1Content-Type: application/jsonUser-Agent: Chrome/61.0.3163.100 Safari/537.36Host: 192.168.5.239:84Content-Length: 168Connection: Keep-Alive{"Index":"7616","MAC":"0004A3B4D608","IP":"C0A80056","Reader":"0","Card":"783438","Serial":"8K7236","type":"0","ID":"8K7236","Status":"00","DataLen":"6","Input":"0000"}1. Write your own code to receive and respond to the controller with the following string (please capture the package for confirmation) {"ActIndex":"0","AcsRes":"1","Time":"1"} The homepage of the controller will display permission for entry and exit, allowing for multiple tests.Adjust the corresponding AcsRes value according to the business, with 1 enabled and 0 not enabled; If it is a control gate, then Time=1; The parameter ActIndex=Reader&0x01, where Reader is the field obtained after swiping the card, with 0 in and 1 out.2. If voice broadcasting is required, respond to the controller with the following string (GB2312 encoding) (please capture the packet for confirmation) {"Voice": "Welcome!", "ActIndex": "0", "AcsRes": "1", "Time": "1"} 3. If voice broadcasting and screen display are required, respond to the controller with the following string (GB2312 encoding) (please capture and confirm){"Card": "4238669", "Systime": "2019-01-18 11:47:09", "Voice": "Welcome!", "ActIndex": "0", "AcsRes": "1", "Time": "1", "Note": "Scan the code to enter", "Name": "Zhang Sanqiang"} You can see the field information displayed on this screen on the homepage. 5? Explanation1. Run the server software for testing. The interval between packet capture analysis request and response should be less than the timeout time of the controller parameter interface. 2. If the response time is too long due to business reasons, exceeding the timeout setting of the parameter, a record of response timeout will be generated. 3. Other precautions can be found in the "Cloud Controller Docking Development Guide" End of file!